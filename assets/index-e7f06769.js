(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function d(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=d(e);fetch(e.href,t)}})();function E(s){if(s=="")throw new Error("Project title is required");const o=[];return{getTitle:()=>s,getTasks:()=>o,toggleTask:c=>{for(let n=0;n<o.length;n++)if(o[n].getId()==c){o[n].toggleCompletion();break}},addTask:c=>{const n=o.length;o.push(Object.assign({getId:()=>n},c))},sortTasks:()=>{o.sort((c,n)=>{const l={high:2,mid:1,low:0};return c.getCompletion()&&!n.getCompletion()?-1:!c.getCompletion()&&n.getCompletion()?1:l[c.getPriority()]-l[n.getPriority()]})},removeTask:c=>{for(let n=0;n<o.length;n++)o[n].getId()==c&&o.splice(n,1)}}}function b(){let s=[];const o=e=>{const t=s.length;s.push(Object.assign({getId:()=>t},e))};o(E("Default Project"));let d=s[0];return{addProject:o,makeCurrentProject:e=>{for(let t=0;t<s.length;t++)s[t].getId()==e&&(d=s[t])},getProjects:()=>s,getCurrentProject:()=>d}}const r=b();function C(){const s=e=>{let t=document.createElement("div");t.classList.add("task");let c=document.createElement("button");c.setAttribute("id","delete-task-button"),c.classList.add("close-button"),c.textContent="â¨‰",c.addEventListener("click",function(){r.getCurrentProject().removeTask(e.getId()),d()}),t.append(c);let n=document.createElement("div");n.classList.add("task-top-section");let l=document.createElement("div");l.classList.add("task-checkbox-box");let g=document.createElement("input");g.setAttribute("type","checkbox"),g.classList.add("task-checkbox"),g.checked=e.getCompletion();let u=document.createElement("div");u.classList.add("task-title-box");let m=document.createElement("h1");m.classList.add("task-title"),m.textContent=e.getTitle(),e.getCompletion()&&(t.classList.add("greyed-out"),t.classList.add("task-completed"),m.classList.add("scratched")),g.addEventListener("click",function(){r.getCurrentProject().toggleTask(e.getId()),t.classList.toggle("greyed-out"),t.classList.toggle("task-completed"),m.classList.toggle("scratched"),d()}),l.append(g),u.append(m),n.append(e.getId()),n.append(l),n.append(u),t.append(n);let i=document.createElement("div");if(i.classList.add("task-details-section"),e.getDescription()!=""){let p=document.createElement("div");p.classList.add("task-description-box");let k=document.createElement("p");k.textContent=e.getDescription(),p.append(k),i.append(p)}let y=document.createElement("div");y.classList.add("task-priority-box","greyed-out");let L=document.createElement("p");L.textContent=`This is a -${e.getPriority()}- priority task`,y.append(L),i.append(y);let j=document.createElement("div");j.classList.add("task-due-date-box","greyed-out");let f=document.createElement("p");switch(f.textContent=`This task is to be finished by ${e.getDueDate().getMonth()+1}/${e.getDueDate().getDate()}/${e.getDueDate().getFullYear()}`,j.append(f),i.append(j),i.classList.add("hidden"),t.append(i),t.addEventListener("click",function(p){p.target!==g&&(i.classList.toggle("hidden"),t.classList.toggle("task-expanded"))}),e.getPriority()){case"low":t.classList.add("low-priority");break;case"mid":t.classList.add("mid-priority");break;case"high":t.classList.add("high-priority");break}return t},o=e=>{let t=document.createElement("button");return t.classList.add("project","aside-button"),t.textContent=e.getTitle(),t.addEventListener("click",function(){r.makeCurrentProject(e.getId()),document.querySelector(".current-project-title").textContent=e.getTitle(),d()}),t},d=()=>{const e=document.querySelector(".tasks-container");e.innerHTML="",r.getCurrentProject().sortTasks(),r.getCurrentProject().getTasks().forEach(t=>e.prepend(s(t)))};return{updateTasks:d,updateProjects:()=>{const e=document.querySelector(".projects-container");e.innerHTML="",r.getProjects().forEach(t=>e.prepend(o(t)))}}}const h=C();function I(s,o,d,a=""){if(s==""||o==""||!(d instanceof Date)||isNaN(d))throw new Error("Invalid task paramaters");let e=!1;return{getTitle:()=>s,getDescription:()=>a,getPriority:()=>o,getDueDate:()=>d,getCompletion:()=>e,toggleCompletion:()=>e==!0?e=!1:e=!0}}(function(){h.updateProjects(),document.querySelector(".current-project-title").textContent=r.getCurrentProject().getTitle();const s=document.getElementById("add-task-button"),o=document.getElementById("submit-task-button"),d=document.getElementById("add-task-modal"),a=document.getElementById("close-add-task-modal-button"),e=document.getElementById("open-projects-button"),t=document.getElementById("close-projects-button"),c=document.getElementById("add-project-button"),n=document.getElementById("create-project-button"),l=document.getElementById("add-project-modal"),g=document.getElementById("close-add-project-modal-button"),u=document.querySelector(".overlay");function m(){d.classList.remove("hidden"),u.classList.remove("hidden")}function i(){d.classList.add("hidden"),u.classList.add("hidden")}function y(){document.querySelector("aside").style.width="250px"}function L(){document.querySelector("aside").style.width="0"}function j(){l.classList.remove("hidden"),u.classList.remove("hidden")}function f(){l.classList.add("hidden"),u.classList.add("hidden")}e.addEventListener("click",y),t.addEventListener("click",L),c.addEventListener("click",j),g.addEventListener("click",f),s.addEventListener("click",m),u.addEventListener("click",function(){i(),f()}),a.addEventListener("click",i),o.addEventListener("click",function(){const p=document.getElementById("task-title-input").value,k=document.getElementById("task-description-input").value,v=document.getElementById("task-priority-input").value,P=document.getElementById("task-due-date-input").value;let T=I(p,v,new Date(P),k);i(),r.getCurrentProject().addTask(T),h.updateTasks()}),n.addEventListener("click",function(){const p=document.getElementById("project-title-input").value;let k=E(p);f(),r.addProject(k),r.makeCurrentProject(r.getProjects()[r.getProjects().length-1].getId()),document.querySelector(".current-project-title").textContent=k.getTitle(),h.updateProjects(),h.updateTasks()})})();
